{"version":3,"sources":["../../src/crews/types.ts","../../src/crews/crew-tool.ts","../../src/core/tokens.ts","../../src/core/validation.ts","../../src/core/config.ts","../../src/fleet/cursor-api.ts","../../src/github/client.ts","../../src/fleet/fleet.ts"],"names":["config","z"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Type definitions for agentic-crew CLI integration\n *\n * These types match the JSON output from agentic-crew CLI commands.\n */\n\nimport { z } from 'zod';\n\n/**\n * Configuration for crew tool execution\n */\nexport interface CrewToolConfig {\n  /** How to invoke agentic-crew: 'uv' (default) or 'direct' */\n  invokeMethod?: 'uv' | 'direct';\n  /** Default timeout in milliseconds (default: 300000 = 5 minutes) */\n  defaultTimeout?: number;\n  /** Environment variables to pass to crew execution */\n  env?: Record<string, string>;\n}\n\n/**\n * Options for invoking a crew\n */\nexport interface InvokeCrewOptions {\n  /** Package name (e.g., 'otterfall') */\n  package: string;\n  /** Crew name (e.g., 'game_builder') */\n  crew: string;\n  /** Input specification for the crew */\n  input: string;\n  /** Optional timeout override in milliseconds */\n  timeout?: number;\n  /** Optional additional environment variables */\n  env?: Record<string, string>;\n}\n\n/**\n * Result from crew execution (matches agentic-crew CLI JSON output)\n */\nexport interface CrewResult {\n  /** Whether execution succeeded */\n  success: boolean;\n  /** Crew output (if successful) */\n  output?: string;\n  /** Error message (if failed) */\n  error?: string;\n  /** Framework that was used */\n  framework_used?: string;\n  /** Execution time in milliseconds */\n  duration_ms: number;\n}\n\n/**\n * Information about an available crew (matches agentic-crew CLI JSON output)\n */\nexport interface CrewInfo {\n  /** Package name */\n  package: string;\n  /** Crew name */\n  name: string;\n  /** Crew description */\n  description: string;\n  /** Required framework (null if framework-agnostic) */\n  required_framework: string | null;\n}\n\n/**\n * List crews response\n */\nexport interface CrewListResponse {\n  crews: CrewInfo[];\n}\n\n/**\n * Zod schema for CrewToolConfig validation\n */\nexport const CrewToolConfigSchema = z.object({\n  invokeMethod: z.enum(['uv', 'direct']).default('uv'),\n  defaultTimeout: z.number().positive().default(300000),\n  env: z.record(z.string(), z.string()).optional(),\n});\n\n/**\n * Zod schema for InvokeCrewOptions validation\n */\nexport const InvokeCrewOptionsSchema = z.object({\n  package: z\n    .string()\n    .min(1)\n    .regex(\n      /^[a-zA-Z0-9_.-]+$/,\n      'Package name must be alphanumeric and may include hyphens, underscores, or dots'\n    ),\n  crew: z\n    .string()\n    .min(1)\n    .regex(\n      /^[a-zA-Z0-9_.-]+$/,\n      'Crew name must be alphanumeric and may include hyphens, underscores, or dots'\n    ),\n  input: z.string(),\n  timeout: z.number().positive().optional(),\n  env: z.record(z.string(), z.string()).optional(),\n});\n\n/**\n * Validate CrewToolConfig\n */\nexport function validateConfig(config: unknown): CrewToolConfig {\n  return CrewToolConfigSchema.parse(config);\n}\n\n/**\n * Validate InvokeCrewOptions\n */\nexport function validateInvokeOptions(options: unknown): InvokeCrewOptions {\n  return InvokeCrewOptionsSchema.parse(options);\n}\n","/**\n * CrewTool - TypeScript interface for invoking agentic-crew CLI\n *\n * This tool invokes the published agentic-crew Python package via CLI,\n * enabling TypeScript/Node.js applications to run AI crews.\n *\n * Architecture:\n * - agentic-crew (Python): Crew orchestration, framework decomposition\n * - agentic-control (TypeScript): Fleet management, invokes crews via this tool\n */\n\nimport { spawn } from 'node:child_process';\nimport { z } from 'zod';\nimport type {\n  CrewInfo,\n  CrewListResponse,\n  CrewResult,\n  CrewToolConfig,\n  InvokeCrewOptions,\n} from './types.js';\nimport { validateConfig, validateInvokeOptions } from './types.js';\n\n/**\n * Error categories for crew tool operations\n */\nexport type CrewToolErrorCategory =\n  | 'config'\n  | 'validation'\n  | 'subprocess'\n  | 'crew'\n  | 'not_installed';\n\n/**\n * Custom error class for crew tool operations\n */\nexport class CrewToolError extends Error {\n  constructor(\n    message: string,\n    public category: CrewToolErrorCategory,\n    public details?: Record<string, unknown>\n  ) {\n    super(message);\n    this.name = 'CrewToolError';\n  }\n}\n\n/**\n * Grace period before sending SIGKILL after SIGTERM (in milliseconds)\n */\nconst SIGKILL_GRACE_PERIOD_MS = 5000;\n\n/**\n * Crew tool for invoking agentic-crew from TypeScript\n *\n * @example Basic usage\n * ```typescript\n * const crewTool = new CrewTool();\n *\n * // List available crews\n * const crews = await crewTool.listCrews();\n *\n * // Run a crew\n * const result = await crewTool.invokeCrew({\n *   package: 'otterfall',\n *   crew: 'game_builder',\n *   input: 'Create a QuestComponent',\n * });\n * ```\n *\n * @example As a Vercel AI tool\n * ```typescript\n * import { tool } from 'ai';\n * import { z } from 'zod';\n *\n * const crewTool = new CrewTool();\n *\n * export const invokeCrewTool = tool({\n *   description: 'Delegate a task to a specialized AI crew',\n *   parameters: z.object({\n *     package: z.string(),\n *     crew: z.string(),\n *     input: z.string(),\n *   }),\n *   execute: async ({ package: pkg, crew, input }) => {\n *     const result = await crewTool.invokeCrew({ package: pkg, crew, input });\n *     if (!result.success) throw new Error(result.error);\n *     return result.output;\n *   },\n * });\n * ```\n */\nexport class CrewTool {\n  private config: Required<CrewToolConfig>;\n\n  constructor(config?: CrewToolConfig) {\n    const validated = validateConfig(config ?? {});\n    // Zod provides defaults for invokeMethod and defaultTimeout, so they are always defined\n    this.config = {\n      invokeMethod: validated.invokeMethod ?? 'uv',\n      defaultTimeout: validated.defaultTimeout ?? 300000,\n      env: validated.env ?? {},\n    };\n  }\n\n  /**\n   * List all available crews across all packages\n   */\n  async listCrews(): Promise<CrewInfo[]> {\n    const result = await this.executeCommand(['list', '--json']);\n\n    if (!result.success) {\n      throw new CrewToolError(`Failed to list crews: ${result.error}`, 'crew', {\n        exitCode: result.exitCode,\n      });\n    }\n\n    if (!result.output) {\n      throw new CrewToolError('Missing output from list command', 'subprocess', {\n        exitCode: result.exitCode,\n      });\n    }\n\n    try {\n      const response = JSON.parse(result.output) as CrewListResponse;\n      return response.crews ?? [];\n    } catch {\n      throw new CrewToolError('Failed to parse crew list response', 'subprocess', {\n        output: result.output,\n      });\n    }\n  }\n\n  /**\n   * Get detailed information about a specific crew\n   */\n  async getCrewInfo(packageName: string, crewName: string): Promise<CrewInfo> {\n    const result = await this.executeCommand(['info', packageName, crewName, '--json']);\n\n    if (!result.success) {\n      throw new CrewToolError(`Failed to get crew info: ${result.error}`, 'crew', {\n        package: packageName,\n        crew: crewName,\n        exitCode: result.exitCode,\n      });\n    }\n\n    if (!result.output) {\n      throw new CrewToolError('Missing output from info command', 'subprocess', {\n        package: packageName,\n        crew: crewName,\n        exitCode: result.exitCode,\n      });\n    }\n\n    try {\n      return JSON.parse(result.output) as CrewInfo;\n    } catch {\n      throw new CrewToolError('Failed to parse crew info response', 'subprocess', {\n        output: result.output,\n      });\n    }\n  }\n\n  /**\n   * Invoke a crew with the given input\n   */\n  async invokeCrew(options: InvokeCrewOptions): Promise<CrewResult> {\n    const startTime = Date.now();\n\n    try {\n      const validated = validateInvokeOptions(options);\n\n      const result = await this.executeCommand(\n        ['run', validated.package, validated.crew, '--input', validated.input, '--json'],\n        {\n          timeout: validated.timeout ?? this.config.defaultTimeout,\n          env: { ...this.config.env, ...validated.env },\n        }\n      );\n\n      // Parse JSON result from agentic-crew CLI\n      if (result.success && result.output) {\n        try {\n          const parsed = JSON.parse(result.output) as CrewResult;\n          return {\n            ...parsed,\n            duration_ms: parsed.duration_ms ?? Date.now() - startTime,\n          };\n        } catch {\n          // If JSON parsing fails, treat output as plain text result\n          return {\n            success: true,\n            output: result.output,\n            duration_ms: Date.now() - startTime,\n          };\n        }\n      }\n\n      return {\n        success: false,\n        error: result.error ?? 'Unknown error',\n        duration_ms: Date.now() - startTime,\n      };\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        const validationErrors = error.issues\n          .map((e: z.core.$ZodIssue) => `${e.path.join('.')}: ${e.message}`)\n          .join('; ');\n        return {\n          success: false,\n          error: `Invalid options provided: ${validationErrors}`,\n          duration_ms: Date.now() - startTime,\n        };\n      }\n\n      if (error instanceof CrewToolError) {\n        return {\n          success: false,\n          error: error.message,\n          duration_ms: Date.now() - startTime,\n        };\n      }\n\n      return {\n        success: false,\n        error: `Unexpected error: ${(error as Error).message}`,\n        duration_ms: Date.now() - startTime,\n      };\n    }\n  }\n\n  /**\n   * Execute an agentic-crew CLI command\n   *\n   * Security notes:\n   * - Uses spawn() with argument array (no shell interpretation)\n   * - Package/crew names are validated via Zod regex: /^[a-zA-Z0-9_.-]+$/\n   * - Input strings are passed as single array elements (not shell-interpolated)\n   * - No shell=true option is used, preventing command injection\n   */\n  private async executeCommand(\n    args: string[],\n    options?: { timeout?: number; env?: Record<string, string> }\n  ): Promise<{ success: boolean; output?: string; error?: string; exitCode?: number }> {\n    return new Promise((resolve) => {\n      const timeout = options?.timeout ?? this.config.defaultTimeout;\n      const env = { ...process.env, ...this.config.env, ...options?.env };\n\n      // Build command based on invoke method\n      // Note: spawn() with array args is safe from command injection\n      // because arguments are passed directly to the executable without shell interpretation\n      const executable = this.config.invokeMethod === 'uv' ? 'uv' : 'agentic-crew';\n      const commandArgs =\n        this.config.invokeMethod === 'uv' ? ['run', 'agentic-crew', ...args] : args;\n\n      // spawn with shell:false (default) prevents command injection\n      const proc = spawn(executable, commandArgs, { env, shell: false });\n\n      let stdout = '';\n      let stderr = '';\n      let timedOut = false;\n      let exited = false;\n      let sigkillHandle: ReturnType<typeof setTimeout> | null = null;\n\n      const timeoutHandle = setTimeout(() => {\n        timedOut = true;\n        proc.kill('SIGTERM');\n\n        // Schedule SIGKILL escalation if process doesn't exit\n        sigkillHandle = setTimeout(() => {\n          if (!exited) {\n            proc.kill('SIGKILL');\n          }\n        }, SIGKILL_GRACE_PERIOD_MS);\n      }, timeout);\n\n      proc.stdout?.on('data', (data) => {\n        stdout += data.toString();\n      });\n\n      proc.stderr?.on('data', (data) => {\n        stderr += data.toString();\n      });\n\n      proc.on('exit', (code, signal) => {\n        exited = true;\n        clearTimeout(timeoutHandle);\n        if (sigkillHandle) {\n          clearTimeout(sigkillHandle);\n        }\n\n        if (timedOut) {\n          resolve({\n            success: false,\n            error: `Crew execution timed out after ${timeout}ms`,\n            output: stdout.trim(),\n            exitCode: code ?? 1,\n          });\n          return;\n        }\n\n        // Handle signal-based termination\n        if (signal) {\n          resolve({\n            success: false,\n            error: `Process terminated by signal: ${signal}`,\n            output: stdout.trim(),\n            exitCode: code ?? 1,\n          });\n          return;\n        }\n\n        if (code === 0) {\n          resolve({\n            success: true,\n            output: stdout.trim(),\n            exitCode: code,\n          });\n        } else {\n          resolve({\n            success: false,\n            error: stderr.trim() || stdout.trim() || 'Crew execution failed',\n            output: stdout.trim(),\n            exitCode: code ?? 1,\n          });\n        }\n      });\n\n      // Handle close event for complete cleanup\n      proc.on('close', () => {\n        exited = true;\n        clearTimeout(timeoutHandle);\n        if (sigkillHandle) {\n          clearTimeout(sigkillHandle);\n        }\n      });\n\n      proc.on('error', (error: NodeJS.ErrnoException) => {\n        exited = true;\n        clearTimeout(timeoutHandle);\n        if (sigkillHandle) {\n          clearTimeout(sigkillHandle);\n        }\n\n        // Check if executable is not found\n        if (error.code === 'ENOENT') {\n          const executableName = this.config.invokeMethod === 'uv' ? 'uv' : 'agentic-crew';\n          resolve({\n            success: false,\n            error: `${executableName} not found. Install with: ${\n              this.config.invokeMethod === 'uv'\n                ? 'curl -LsSf https://astral.sh/uv/install.sh | sh (or pip install uv)'\n                : 'pip install agentic-crew (or uv pip install agentic-crew)'\n            }`,\n          });\n        } else {\n          resolve({\n            success: false,\n            error: `Failed to spawn process: ${error.message}`,\n          });\n        }\n      });\n    });\n  }\n}\n","/**\n * Intelligent Token Management for Multi-Organization GitHub Access\n *\n * This module provides automatic token switching based on repository organization.\n * ALL configuration is user-provided - no hardcoded organizations or tokens.\n *\n * Configuration methods (in priority order):\n * 1. Programmatic: setTokenConfig() / addOrganization()\n * 2. Config file: agentic.config.json with \"tokens\" section\n * 3. Environment variables: AGENTIC_ORG_<NAME>_TOKEN pattern\n *\n * @example Config file (agentic.config.json):\n * ```json\n * {\n *   \"tokens\": {\n *     \"organizations\": {\n *       \"MyOrg\": { \"name\": \"MyOrg\", \"tokenEnvVar\": \"GITHUB_MYORG_TOKEN\" },\n *       \"AnotherOrg\": { \"name\": \"AnotherOrg\", \"tokenEnvVar\": \"ANOTHER_TOKEN\" }\n *     },\n *     \"defaultTokenEnvVar\": \"GITHUB_TOKEN\",\n *     \"prReviewTokenEnvVar\": \"GITHUB_TOKEN\"\n *   }\n * }\n * ```\n *\n * @example Environment variables:\n * ```bash\n * # Define org-to-token mappings\n * export AGENTIC_ORG_MYORG_TOKEN=GITHUB_MYORG_TOKEN\n * export AGENTIC_ORG_ANOTHER_TOKEN=ANOTHER_ORG_PAT\n *\n * # Override defaults\n * export AGENTIC_DEFAULT_TOKEN=GITHUB_TOKEN\n * export AGENTIC_PR_REVIEW_TOKEN=GITHUB_TOKEN\n * ```\n */\n\nimport type { OrganizationConfig, Result, TokenConfig } from './types.js';\n\n// ============================================\n// Configuration State (NO HARDCODED VALUES)\n// ============================================\n\n/**\n * Default token configuration - uses standard GITHUB_TOKEN\n * Users MUST configure their own organizations\n */\nconst DEFAULT_CONFIG: TokenConfig = {\n  organizations: {}, // Empty by default - users configure their own\n  defaultTokenEnvVar: 'GITHUB_TOKEN',\n  prReviewTokenEnvVar: 'GITHUB_TOKEN',\n};\n\nlet currentConfig: TokenConfig = { ...DEFAULT_CONFIG };\n\n// ============================================\n// Environment Configuration Loading\n// ============================================\n\n/**\n * Load organization configs from environment variables\n *\n * Pattern: AGENTIC_ORG_<NAME>_TOKEN=<TOKEN_ENV_VAR_NAME>\n *\n * @example\n * AGENTIC_ORG_MYCOMPANY_TOKEN=GITHUB_MYCOMPANY_TOKEN\n * This maps \"mycompany\" org to use the value from GITHUB_MYCOMPANY_TOKEN env var\n */\nfunction loadEnvConfig(): void {\n  const orgPattern = /^AGENTIC_ORG_([A-Z0-9_]+)_TOKEN$/;\n\n  for (const [key, value] of Object.entries(process.env)) {\n    const match = key.match(orgPattern);\n    if (match?.[1] && value) {\n      // Convert UPPER_CASE to kebab-case for org name\n      const orgName = match[1].toLowerCase().replace(/_/g, '-');\n      if (!currentConfig.organizations[orgName]) {\n        currentConfig.organizations[orgName] = {\n          name: orgName,\n          tokenEnvVar: value,\n        };\n      }\n    }\n  }\n\n  // Override PR review token if specified\n  if (process.env.AGENTIC_PR_REVIEW_TOKEN) {\n    currentConfig.prReviewTokenEnvVar = process.env.AGENTIC_PR_REVIEW_TOKEN;\n  }\n\n  // Override default token if specified\n  if (process.env.AGENTIC_DEFAULT_TOKEN) {\n    currentConfig.defaultTokenEnvVar = process.env.AGENTIC_DEFAULT_TOKEN;\n  }\n}\n\n// Load env config on module initialization\nloadEnvConfig();\n\n// ============================================\n// Public Configuration API\n// ============================================\n\n/**\n * Get the current token configuration\n */\nexport function getTokenConfig(): TokenConfig {\n  return { ...currentConfig };\n}\n\n/**\n * Update the token configuration\n *\n * @example\n * setTokenConfig({\n *   organizations: {\n *     \"my-org\": { name: \"my-org\", tokenEnvVar: \"MY_ORG_TOKEN\" }\n *   },\n *   prReviewTokenEnvVar: \"PR_REVIEW_TOKEN\"\n * });\n */\nexport function setTokenConfig(config: Partial<TokenConfig>): void {\n  currentConfig = {\n    ...currentConfig,\n    ...config,\n    organizations: {\n      ...currentConfig.organizations,\n      ...config.organizations,\n    },\n  };\n}\n\n/**\n * Reset configuration to defaults (useful for testing)\n */\nexport function resetTokenConfig(): void {\n  currentConfig = { ...DEFAULT_CONFIG, organizations: {} };\n  loadEnvConfig();\n}\n\n/**\n * Add or update an organization configuration\n *\n * @example\n * addOrganization({\n *   name: \"my-company\",\n *   tokenEnvVar: \"GITHUB_MYCOMPANY_TOKEN\",\n *   defaultBranch: \"main\",\n *   isEnterprise: true\n * });\n */\nexport function addOrganization(org: OrganizationConfig): void {\n  currentConfig.organizations[org.name] = org;\n}\n\n/**\n * Remove an organization configuration\n */\nexport function removeOrganization(orgName: string): void {\n  delete currentConfig.organizations[orgName];\n}\n\n// ============================================\n// Organization Extraction\n// ============================================\n\n/**\n * Extract organization name from a repository URL or full name\n * Uses a safe regex pattern to prevent ReDoS attacks\n *\n * @example\n * extractOrg(\"https://github.com/my-org/my-repo\") // \"my-org\"\n * extractOrg(\"my-org/my-repo\") // \"my-org\"\n * extractOrg(\"git@github.com:my-org/my-repo.git\") // \"my-org\"\n */\nexport function extractOrg(repoUrl: string): string | null {\n  // Handle full GitHub URLs - safe pattern with character class restriction\n  const urlMatch = repoUrl.match(/github\\.com[/:]([a-zA-Z0-9_.-]+)/);\n  if (urlMatch?.[1]) {\n    return urlMatch[1];\n  }\n\n  // Handle owner/repo format\n  const shortMatch = repoUrl.match(/^([a-zA-Z0-9_.-]+)\\//);\n  if (shortMatch?.[1]) {\n    return shortMatch[1];\n  }\n\n  return null;\n}\n\n// ============================================\n// Token Resolution\n// ============================================\n\n/**\n * Get the token environment variable name for a given organization\n * Returns the default if org is not configured\n *\n * @param org - Organization name (case-insensitive)\n */\nexport function getTokenEnvVar(org: string): string {\n  // Try exact match first\n  const config = currentConfig.organizations[org];\n  if (config?.tokenEnvVar) {\n    return config.tokenEnvVar;\n  }\n\n  // Try case-insensitive match\n  const lowerOrg = org.toLowerCase();\n  for (const [key, value] of Object.entries(currentConfig.organizations)) {\n    if (key.toLowerCase() === lowerOrg && value.tokenEnvVar) {\n      return value.tokenEnvVar;\n    }\n  }\n\n  return currentConfig.defaultTokenEnvVar;\n}\n\n/**\n * Get the actual token value for an organization\n *\n * @param org - Organization name\n * @returns Token value or undefined if not set\n */\nexport function getTokenForOrg(org: string): string | undefined {\n  const envVar = getTokenEnvVar(org);\n  return process.env[envVar];\n}\n\n/**\n * Get the token for a repository URL\n * Automatically extracts the organization and returns the appropriate token\n *\n * @param repoUrl - Repository URL or owner/repo format\n * @returns Token value or undefined if not set\n *\n * @example\n * // If configured: addOrganization({ name: \"myorg\", tokenEnvVar: \"MYORG_TOKEN\" })\n * getTokenForRepo(\"https://github.com/myorg/my-repo\")\n * // Returns value of MYORG_TOKEN\n */\nexport function getTokenForRepo(repoUrl: string): string | undefined {\n  const org = extractOrg(repoUrl);\n  if (!org) {\n    return process.env[currentConfig.defaultTokenEnvVar];\n  }\n  return getTokenForOrg(org);\n}\n\n/**\n * Get the token that should be used for PR reviews\n * Ensures a consistent identity across all PR interactions\n *\n * @returns Token value or undefined if not set\n */\nexport function getPRReviewToken(): string | undefined {\n  return process.env[currentConfig.prReviewTokenEnvVar];\n}\n\n/**\n * Get the PR review token environment variable name\n */\nexport function getPRReviewTokenEnvVar(): string {\n  return currentConfig.prReviewTokenEnvVar;\n}\n\n// ============================================\n// Validation\n// ============================================\n\n/**\n * Validate that required tokens are available\n *\n * @param orgs - Organization names to validate (optional, validates all configured if not specified)\n * @returns Validation result with any missing tokens\n */\nexport function validateTokens(orgs?: string[]): Result<string[]> {\n  const missing: string[] = [];\n  const orgsToCheck = orgs ?? Object.keys(currentConfig.organizations);\n\n  for (const org of orgsToCheck) {\n    const token = getTokenForOrg(org);\n    if (!token) {\n      const envVar = getTokenEnvVar(org);\n      missing.push(`${org}: ${envVar} not set`);\n    }\n  }\n\n  // Check PR review token\n  if (!getPRReviewToken()) {\n    missing.push(`PR Review: ${currentConfig.prReviewTokenEnvVar} not set`);\n  }\n\n  // Check default token\n  if (!process.env[currentConfig.defaultTokenEnvVar]) {\n    missing.push(`Default: ${currentConfig.defaultTokenEnvVar} not set`);\n  }\n\n  return {\n    success: missing.length === 0,\n    data: missing,\n    error: missing.length > 0 ? `Missing tokens: ${missing.join(', ')}` : undefined,\n  };\n}\n\n// ============================================\n// Organization Configuration Access\n// ============================================\n\n/**\n * Get organization configuration (case-insensitive)\n */\nexport function getOrgConfig(org: string): OrganizationConfig | undefined {\n  // Try exact match first\n  if (currentConfig.organizations[org]) {\n    return currentConfig.organizations[org];\n  }\n\n  // Try case-insensitive match\n  const lowerOrg = org.toLowerCase();\n  for (const [key, value] of Object.entries(currentConfig.organizations)) {\n    if (key.toLowerCase() === lowerOrg) {\n      return value;\n    }\n  }\n\n  return undefined;\n}\n\n/**\n * Get all configured organizations\n */\nexport function getConfiguredOrgs(): string[] {\n  return Object.keys(currentConfig.organizations);\n}\n\n/**\n * Check if an organization is configured (case-insensitive)\n */\nexport function isOrgConfigured(org: string): boolean {\n  if (org in currentConfig.organizations) {\n    return true;\n  }\n\n  const lowerOrg = org.toLowerCase();\n  for (const key of Object.keys(currentConfig.organizations)) {\n    if (key.toLowerCase() === lowerOrg) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// ============================================\n// Environment Helpers for Subprocesses\n// ============================================\n\n/**\n * Create environment variables object for a subprocess targeting a specific org\n * Useful when spawning child processes that need the correct GitHub token\n *\n * @param repoUrl - Repository URL to get token for\n * @returns Object with GH_TOKEN and GITHUB_TOKEN set\n *\n * @example\n * import { spawnSync } from 'node:child_process';\n * const proc = spawnSync('gh', ['pr', 'list'], {\n *   env: { ...process.env, ...getEnvForRepo(\"owner/repo\") }\n * });\n */\nexport function getEnvForRepo(repoUrl: string): Record<string, string> {\n  const token = getTokenForRepo(repoUrl);\n  if (!token) {\n    return {};\n  }\n  return {\n    GH_TOKEN: token,\n    GITHUB_TOKEN: token,\n  };\n}\n\n/**\n * Create environment variables for PR review operations\n * Uses the configured PR review identity\n *\n * @returns Object with GH_TOKEN and GITHUB_TOKEN set for PR review\n */\nexport function getEnvForPRReview(): Record<string, string> {\n  const token = getPRReviewToken();\n  if (!token) {\n    return {};\n  }\n  return {\n    GH_TOKEN: token,\n    GITHUB_TOKEN: token,\n  };\n}\n\n// ============================================\n// Convenience Utilities\n// ============================================\n\n/**\n * Check if we have a valid token for an organization\n */\nexport function hasTokenForOrg(org: string): boolean {\n  return !!getTokenForOrg(org);\n}\n\n/**\n * Check if we have a valid token for a repository\n */\nexport function hasTokenForRepo(repoUrl: string): boolean {\n  return !!getTokenForRepo(repoUrl);\n}\n\n/**\n * Get a summary of token availability for debugging/display\n */\nexport function getTokenSummary(): Record<\n  string,\n  { envVar: string; available: boolean; configured: boolean }\n> {\n  const summary: Record<string, { envVar: string; available: boolean; configured: boolean }> = {};\n\n  for (const org of getConfiguredOrgs()) {\n    const envVar = getTokenEnvVar(org);\n    summary[org] = {\n      envVar,\n      available: !!process.env[envVar],\n      configured: true,\n    };\n  }\n\n  summary._default = {\n    envVar: currentConfig.defaultTokenEnvVar,\n    available: !!process.env[currentConfig.defaultTokenEnvVar],\n    configured: true,\n  };\n\n  summary._pr_review = {\n    envVar: currentConfig.prReviewTokenEnvVar,\n    available: !!getPRReviewToken(),\n    configured: true,\n  };\n\n  return summary;\n}\n","/**\n * Configuration validation using Zod schemas\n */\n\nimport { z } from 'zod';\nimport { ConfigErrorCode, ConfigurationError } from './errors.js';\n\n// ============================================\n// Base Schemas\n// ============================================\n\nconst TokenOrgSchema = z.object({\n  name: z.string().min(1).max(39),\n  tokenEnvVar: z.string().min(1),\n});\n\nconst TokenConfigSchema = z.object({\n  organizations: z.record(z.string(), TokenOrgSchema).optional(),\n  defaultTokenEnvVar: z.string().optional(),\n  prReviewTokenEnvVar: z.string().optional(),\n});\n\nconst FleetConfigSchema = z.object({\n  autoCreatePr: z.boolean().optional(),\n  openAsCursorGithubApp: z.boolean().optional(),\n  skipReviewerRequest: z.boolean().optional(),\n});\n\nconst TriageConfigSchema = z.object({\n  provider: z.enum(['anthropic', 'openai', 'google', 'mistral', 'azure']).optional(),\n  model: z.string().optional(),\n  apiKeyEnvVar: z.string().optional(),\n});\n\nconst MCPServerConfigSchema = z.object({\n  enabled: z.boolean().optional(),\n  tokenEnvVar: z.string().optional(),\n  tokenEnvVarFallbacks: z.array(z.string()).optional(),\n  mode: z.enum(['stdio', 'proxy']).optional(),\n  command: z.string().optional(),\n  args: z.array(z.string()).optional(),\n  proxyUrl: z.string().url().optional(),\n});\n\nconst MCPConfigSchema = z\n  .object({\n    cursor: MCPServerConfigSchema.optional(),\n    github: MCPServerConfigSchema.optional(),\n    context7: MCPServerConfigSchema.optional(),\n    '21st-magic': MCPServerConfigSchema.optional(),\n  })\n  .catchall(MCPServerConfigSchema);\n\nconst CursorConfigSchema = z.object({\n  apiKeyEnvVar: z.string().optional(),\n  baseUrl: z.string().url().optional(),\n});\n\n// ============================================\n// Main Configuration Schema\n// ============================================\n\nexport const AgenticConfigSchema = z.object({\n  tokens: TokenConfigSchema.optional(),\n  defaultRepository: z.string().optional(),\n  coordinationPr: z.number().int().positive().optional(),\n  logLevel: z.enum(['debug', 'info', 'warn', 'error']).optional(),\n  verbose: z.boolean().optional(),\n  cursor: CursorConfigSchema.optional(),\n  fleet: FleetConfigSchema.optional(),\n  triage: TriageConfigSchema.optional(),\n  mcp: MCPConfigSchema.optional(),\n});\n\n// ============================================\n// Validation Functions\n// ============================================\n\n/**\n * Validate configuration object against schema\n */\nexport function validateConfig(config: unknown): void {\n  try {\n    AgenticConfigSchema.parse(config);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      const firstIssue = error.issues[0];\n      if (firstIssue) {\n        const field = firstIssue.path.join('.');\n        const message = `Invalid configuration at '${field}': ${firstIssue.message}`;\n        throw new ConfigurationError(message, ConfigErrorCode.INVALID_SCHEMA, field);\n      }\n      throw new ConfigurationError('Invalid configuration', ConfigErrorCode.INVALID_SCHEMA);\n    }\n    throw error;\n  }\n}\n\n/**\n * Validate environment variable exists and is not empty\n */\nexport function validateEnvVar(envVar: string, description?: string): string {\n  const value = process.env[envVar];\n\n  if (!value || value.trim() === '') {\n    const desc = description ?? envVar;\n    throw new ConfigurationError(\n      `Missing required environment variable: ${envVar}. Please set ${desc} to continue.`,\n      ConfigErrorCode.MISSING_REQUIRED_FIELD,\n      envVar\n    );\n  }\n\n  return value.trim();\n}\n\n/**\n * Validate environment variable with clear error message\n */\nexport function validateEnvVarWithMessage(envVar: string, purpose: string): string {\n  const value = process.env[envVar];\n\n  if (!value || value.trim() === '') {\n    throw new ConfigurationError(\n      `${purpose} requires ${envVar} environment variable. Please set it and try again.`,\n      ConfigErrorCode.MISSING_REQUIRED_FIELD,\n      envVar\n    );\n  }\n\n  return value.trim();\n}\n\n/**\n * Validate repository format (owner/repo)\n */\nexport function validateRepository(repo: string): void {\n  const repoPattern = /^[a-zA-Z0-9._-]+\\/[a-zA-Z0-9._-]+$/;\n\n  if (!repoPattern.test(repo)) {\n    throw new ConfigurationError(\n      `Invalid repository format: ${repo}. Expected format: owner/repo`,\n      ConfigErrorCode.INVALID_VALUE,\n      'repository'\n    );\n  }\n}\n\n/**\n * Validate git reference format\n */\nexport function validateGitRef(ref: string): void {\n  if (!/^[a-zA-Z0-9._/-]+$/.test(ref)) {\n    throw new ConfigurationError(\n      `Invalid git reference format: ${ref}`,\n      ConfigErrorCode.INVALID_VALUE,\n      'gitRef'\n    );\n  }\n\n  if (ref.length > 200) {\n    throw new ConfigurationError(\n      `Git reference too long: ${ref} (max 200 characters)`,\n      ConfigErrorCode.INVALID_VALUE,\n      'gitRef'\n    );\n  }\n}\n\n/**\n * Validate positive integer\n */\nexport function validatePositiveInt(value: string, field: string): number {\n  const parsed = Number.parseInt(value, 10);\n\n  if (Number.isNaN(parsed) || parsed <= 0) {\n    throw new ConfigurationError(\n      `${field} must be a positive integer, got: ${value}`,\n      ConfigErrorCode.INVALID_VALUE,\n      field\n    );\n  }\n\n  return parsed;\n}\n","/**\n * Configuration Management for agentic-control\n *\n * Uses cosmiconfig for standard config file discovery and loading.\n * Searches for configuration in:\n *   - agentic.config.json\n *   - agentic.config.js\n *   - agentic.config.cjs\n *   - .agenticrc\n *   - .agenticrc.json\n *   - package.json \"agentic\" key\n *\n * Priority: CLI args > env vars > config file > defaults\n *\n * @example Config file (agentic.config.json):\n * ```json\n * {\n *   \"tokens\": {\n *     \"organizations\": {\n *       \"my-org\": { \"name\": \"my-org\", \"tokenEnvVar\": \"MY_ORG_TOKEN\" }\n *     }\n *   },\n *   \"defaultModel\": \"claude-sonnet-4-20250514\",\n *   \"fleet\": {\n *     \"autoCreatePr\": true\n *   }\n * }\n * ```\n */\n\nimport { cosmiconfigSync } from 'cosmiconfig';\nimport { setTokenConfig } from './tokens.js';\nimport type { TokenConfig } from './types.js';\nimport { validateConfig } from './validation.js';\n\n// ============================================\n// Configuration Types\n// ============================================\n\nexport interface FleetConfig {\n  /** Auto-create PR when agent completes */\n  autoCreatePr?: boolean;\n  /** Open PR as Cursor GitHub App */\n  openAsCursorGithubApp?: boolean;\n  /** Skip adding user as reviewer */\n  skipReviewerRequest?: boolean;\n}\n\nexport interface TriageConfig {\n  /** AI provider: anthropic, openai, google, mistral, azure */\n  provider?: string;\n  /** Model ID for the provider */\n  model?: string;\n  /** API key environment variable name */\n  apiKeyEnvVar?: string;\n}\n\nexport interface MCPServerConfig {\n  /** Whether this MCP server is enabled */\n  enabled?: boolean;\n  /** Environment variable name for the API key/token */\n  tokenEnvVar?: string;\n  /** Fallback env vars to try if primary not found */\n  tokenEnvVarFallbacks?: string[];\n  /** Transport mode: stdio or proxy */\n  mode?: 'stdio' | 'proxy';\n  /** Command to run for stdio transport */\n  command?: string;\n  /** Arguments for the command */\n  args?: string[];\n  /** Proxy URL for proxy mode */\n  proxyUrl?: string;\n}\n\nexport interface MCPConfig {\n  /** Cursor Background Agent MCP */\n  cursor?: MCPServerConfig;\n  /** GitHub MCP */\n  github?: MCPServerConfig;\n  /** Context7 documentation MCP */\n  context7?: MCPServerConfig;\n  /** 21st.dev Magic MCP */\n  '21st-magic'?: MCPServerConfig;\n  /** Custom MCP servers */\n  [key: string]: MCPServerConfig | undefined;\n}\n\nexport interface RoleConfig {\n  /** Enable/disable the role */\n  enabled?: boolean;\n  /** Override the system prompt */\n  systemPrompt?: string;\n  /** Model override */\n  model?: string;\n}\n\nexport interface RolesConfig {\n  /** Sage role configuration */\n  sage?: RoleConfig;\n  /** Harvester role configuration */\n  harvester?: RoleConfig;\n  /** Curator role configuration */\n  curator?: RoleConfig;\n  /** Reviewer role configuration */\n  reviewer?: RoleConfig;\n  /** Fixer role configuration */\n  fixer?: RoleConfig;\n  /** Delegator role configuration */\n  delegator?: RoleConfig;\n}\n\nexport interface AgenticConfig {\n  /** Token configuration for multi-org access */\n  tokens?: Partial<TokenConfig>;\n\n  /** Default repository for fleet operations */\n  defaultRepository?: string;\n\n  /** Coordination PR number for fleet communication */\n  coordinationPr?: number;\n\n  /** Log level */\n  logLevel?: 'debug' | 'info' | 'warn' | 'error';\n\n  /** Whether to enable verbose output */\n  verbose?: boolean;\n\n  /** Cursor API configuration */\n  cursor?: {\n    /** API key environment variable name */\n    apiKeyEnvVar?: string;\n    /** Base URL for Cursor API */\n    baseUrl?: string;\n  };\n\n  /** Fleet default options */\n  fleet?: FleetConfig;\n\n  /** Triage (AI analysis) configuration */\n  triage?: TriageConfig;\n\n  /** MCP server configuration */\n  mcp?: MCPConfig;\n\n  /** Roles configuration */\n  roles?: RolesConfig;\n}\n\n// ============================================\n// Cosmiconfig Setup\n// ============================================\n\nconst MODULE_NAME = 'agentic';\n\n// Security: Only allow JSON config files to prevent code execution\n// JavaScript config files could execute arbitrary code during require()\nconst explorer = cosmiconfigSync(MODULE_NAME, {\n  searchPlaces: ['package.json', 'agentic.config.json', '.agenticrc', '.agenticrc.json'],\n  // Security: Disable loaders that execute code\n  loaders: {\n    '.json': (_filepath: string, content: string) => JSON.parse(content),\n  },\n});\n\n// ============================================\n// Configuration State\n// ============================================\n\nlet config: AgenticConfig = {};\nlet configLoaded = false;\nlet configPath: string | null = null;\n\n// ============================================\n// Environment Variable Loading\n// ============================================\n\nfunction loadEnvConfig(): Partial<AgenticConfig> {\n  const envConfig: Partial<AgenticConfig> = {};\n\n  // Build triage config from environment variables\n  const triageFromEnv: Partial<TriageConfig> = {};\n  if (process.env.AGENTIC_MODEL) {\n    triageFromEnv.model = process.env.AGENTIC_MODEL;\n  }\n  if (process.env.AGENTIC_PROVIDER) {\n    triageFromEnv.provider = process.env.AGENTIC_PROVIDER;\n  }\n  if (Object.keys(triageFromEnv).length > 0) {\n    envConfig.triage = triageFromEnv;\n  }\n\n  if (process.env.AGENTIC_REPOSITORY) {\n    envConfig.defaultRepository = process.env.AGENTIC_REPOSITORY;\n  }\n\n  if (process.env.AGENTIC_COORDINATION_PR) {\n    const parsed = Number.parseInt(process.env.AGENTIC_COORDINATION_PR, 10);\n    if (!Number.isNaN(parsed) && parsed > 0) {\n      envConfig.coordinationPr = parsed;\n    }\n  }\n\n  if (process.env.AGENTIC_LOG_LEVEL) {\n    const level = process.env.AGENTIC_LOG_LEVEL.toLowerCase();\n    if (['debug', 'info', 'warn', 'error'].includes(level)) {\n      envConfig.logLevel = level as AgenticConfig['logLevel'];\n    }\n  }\n\n  if (process.env.AGENTIC_VERBOSE === 'true' || process.env.AGENTIC_VERBOSE === '1') {\n    envConfig.verbose = true;\n  }\n\n  return envConfig;\n}\n\n// ============================================\n// Configuration Loading\n// ============================================\n\n/**\n * Deep merge configuration objects\n */\nfunction mergeConfig(base: AgenticConfig, overrides: Partial<AgenticConfig>): AgenticConfig {\n  const result = { ...base };\n\n  for (const [key, value] of Object.entries(overrides)) {\n    if (value === undefined) continue;\n\n    if (typeof value === 'object' && value !== null && !Array.isArray(value)) {\n      const baseValue = (base as Record<string, unknown>)[key];\n      // Only spread baseValue if it's a non-null object\n      const baseObj =\n        typeof baseValue === 'object' && baseValue !== null && !Array.isArray(baseValue)\n          ? baseValue\n          : {};\n      (result as Record<string, unknown>)[key] = {\n        ...baseObj,\n        ...value,\n      };\n    } else {\n      (result as Record<string, unknown>)[key] = value;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Initialize configuration from all sources\n * Priority: programmatic overrides > env vars > config file\n */\nexport function initConfig(overrides?: Partial<AgenticConfig>): AgenticConfig {\n  // Search for config file using cosmiconfig\n  const result = explorer.search();\n\n  if (result && !result.isEmpty) {\n    // Validate configuration before using it\n    validateConfig(result.config);\n    config = result.config as AgenticConfig;\n    configPath = result.filepath;\n  } else {\n    config = {};\n    configPath = null;\n  }\n\n  // Merge environment variables\n  const envConfig = loadEnvConfig();\n  config = mergeConfig(config, envConfig);\n\n  // Apply programmatic overrides\n  if (overrides) {\n    config = mergeConfig(config, overrides);\n  }\n\n  // Validate final configuration\n  validateConfig(config);\n\n  // Apply token configuration\n  if (config.tokens) {\n    setTokenConfig(config.tokens);\n  }\n\n  configLoaded = true;\n  return config;\n}\n\n/**\n * Load config from a specific file path\n */\nexport function loadConfigFromPath(filepath: string): AgenticConfig {\n  const result = explorer.load(filepath);\n\n  if (result && !result.isEmpty) {\n    // Validate configuration before using it\n    validateConfig(result.config);\n    config = result.config as AgenticConfig;\n    configPath = result.filepath;\n\n    if (config.tokens) {\n      setTokenConfig(config.tokens);\n    }\n\n    configLoaded = true;\n    return config;\n  }\n\n  throw new Error(`Failed to load config from ${filepath}`);\n}\n\n// ============================================\n// Public API\n// ============================================\n\n/**\n * Get the current configuration\n */\nexport function getConfig(): AgenticConfig {\n  if (!configLoaded) {\n    initConfig();\n  }\n  return { ...config };\n}\n\n/**\n * Get path to loaded config file\n */\nexport function getConfigPath(): string | null {\n  return configPath;\n}\n\n/**\n * Update configuration at runtime\n */\nexport function setConfig(updates: Partial<AgenticConfig>): void {\n  config = mergeConfig(config, updates);\n\n  if (updates.tokens) {\n    setTokenConfig(updates.tokens);\n  }\n}\n\n/**\n * Reset configuration (useful for testing)\n */\nexport function resetConfig(): void {\n  config = {};\n  configLoaded = false;\n  configPath = null;\n}\n\n/**\n * Get a specific configuration value\n */\nexport function getConfigValue<K extends keyof AgenticConfig>(key: K): AgenticConfig[K] {\n  if (!configLoaded) {\n    initConfig();\n  }\n  return config[key];\n}\n\n/**\n * Check if verbose mode is enabled\n */\nexport function isVerbose(): boolean {\n  return config.verbose ?? false;\n}\n\n/**\n * Get triage configuration\n */\nexport function getTriageConfig(): TriageConfig {\n  if (!configLoaded) {\n    initConfig();\n  }\n  return (\n    config.triage ?? {\n      provider: 'anthropic',\n      model: 'claude-sonnet-4-20250514',\n      apiKeyEnvVar: 'ANTHROPIC_API_KEY',\n    }\n  );\n}\n\n/**\n * Get the default model for triage operations\n * @deprecated Use getTriageConfig() instead\n */\nexport function getDefaultModel(): string {\n  return getTriageConfig().model ?? 'claude-sonnet-4-20250514';\n}\n\n/**\n * Get fleet defaults\n */\nexport function getFleetDefaults(): FleetConfig {\n  if (!configLoaded) {\n    initConfig();\n  }\n  return config.fleet ?? {};\n}\n\n/**\n * Get the log level\n */\nexport function getLogLevel(): string {\n  return config.logLevel ?? 'info';\n}\n\n/**\n * Get Cursor API key from configured environment variable\n */\nexport function getCursorApiKey(): string | undefined {\n  const envVar = config.cursor?.apiKeyEnvVar ?? 'CURSOR_API_KEY';\n  return process.env[envVar];\n}\n\n/**\n * Get default API key env var for a provider\n */\nexport function getDefaultApiKeyEnvVar(provider?: string): string {\n  switch (provider) {\n    case 'openai':\n      return 'OPENAI_API_KEY';\n    case 'google':\n      return 'GOOGLE_API_KEY';\n    case 'mistral':\n      return 'MISTRAL_API_KEY';\n    case 'azure':\n      return 'AZURE_API_KEY';\n    case 'ollama':\n      return 'OLLAMA_API_KEY';\n    default:\n      return 'ANTHROPIC_API_KEY';\n  }\n}\n\n/**\n * Get triage API key from configured environment variable\n * @param providerOverride - Optional provider to use instead of config value\n */\nexport function getTriageApiKey(providerOverride?: string): string | undefined {\n  const triageConfig = getTriageConfig();\n  const provider = providerOverride ?? triageConfig.provider;\n  const envVar = triageConfig.apiKeyEnvVar ?? getDefaultApiKeyEnvVar(provider);\n  return process.env[envVar];\n}\n\n// ============================================\n// Logging Utilities\n// ============================================\n\nconst LOG_LEVELS = {\n  debug: 0,\n  info: 1,\n  warn: 2,\n  error: 3,\n};\n\nfunction shouldLog(level: keyof typeof LOG_LEVELS): boolean {\n  const currentLevel = LOG_LEVELS[getLogLevel() as keyof typeof LOG_LEVELS] ?? 1;\n  return LOG_LEVELS[level] >= currentLevel;\n}\n\nexport const log = {\n  debug: (...args: unknown[]): void => {\n    if (shouldLog('debug')) {\n      console.debug('[agentic:debug]', ...args);\n    }\n  },\n  info: (...args: unknown[]): void => {\n    if (shouldLog('info')) {\n      console.log('[agentic:info]', ...args);\n    }\n  },\n  warn: (...args: unknown[]): void => {\n    if (shouldLog('warn')) {\n      console.warn('[agentic:warn]', ...args);\n    }\n  },\n  error: (...args: unknown[]): void => {\n    if (shouldLog('error')) {\n      console.error('[agentic:error]', ...args);\n    }\n  },\n};\n","/**\n * CursorAPI - Direct HTTP client for Cursor Background Agent API\n *\n * Bypasses MCP for direct API access with better performance and reliability.\n * Adapted from cursor-fleet with enhanced error handling.\n */\n\nimport { log } from '../core/config.js';\nimport type { Agent, Conversation, Repository, Result } from '../core/types.js';\n\n/** Default API base URL - configurable for testing/staging */\nconst DEFAULT_BASE_URL = 'https://api.cursor.com/v0';\n\n/** Retryable HTTP status codes */\nconst RETRYABLE_STATUS_CODES = [429, 500, 502, 503, 504];\n\n/** Default maximum number of retries */\nconst DEFAULT_MAX_RETRIES = 3;\n\n/** Default initial retry delay in milliseconds */\nconst DEFAULT_RETRY_DELAY = 1000;\n\n/** Validation regex for agent IDs (alphanumeric with hyphens) */\nconst AGENT_ID_PATTERN = /^[a-zA-Z0-9-]+$/;\n\n/** Maximum prompt text length */\nconst MAX_PROMPT_LENGTH = 100000;\n\n/** Maximum repository name length */\nconst MAX_REPO_LENGTH = 200;\n\nexport interface CursorAPIOptions {\n  /** API key (defaults to CURSOR_API_KEY env var) */\n  apiKey?: string;\n  /** Request timeout in milliseconds (default: 60000) */\n  timeout?: number;\n  /** API base URL (default: https://api.cursor.com/v0) */\n  baseUrl?: string;\n  /** Maximum number of retries for transient errors (default: 3) */\n  maxRetries?: number;\n  /** Initial delay for exponential backoff in ms (default: 1000) */\n  retryDelay?: number;\n}\n\n/**\n * Validates an agent ID to prevent injection attacks\n */\nfunction validateAgentId(agentId: string): void {\n  if (!agentId || typeof agentId !== 'string') {\n    throw new Error('Agent ID is required and must be a string');\n  }\n  if (agentId.length > 100) {\n    throw new Error('Agent ID exceeds maximum length (100 characters)');\n  }\n  if (!AGENT_ID_PATTERN.test(agentId)) {\n    throw new Error('Agent ID contains invalid characters (only alphanumeric and hyphens allowed)');\n  }\n}\n\n/**\n * Validates prompt text\n */\nfunction validatePromptText(text: string): void {\n  if (!text || typeof text !== 'string') {\n    throw new Error('Prompt text is required and must be a string');\n  }\n  if (text.trim().length === 0) {\n    throw new Error('Prompt text cannot be empty');\n  }\n  if (text.length > MAX_PROMPT_LENGTH) {\n    throw new Error(`Prompt text exceeds maximum length (${MAX_PROMPT_LENGTH} characters)`);\n  }\n}\n\n/**\n * Validates repository name\n */\nfunction validateRepository(repository: string): void {\n  if (!repository || typeof repository !== 'string') {\n    throw new Error('Repository is required and must be a string');\n  }\n  if (repository.length > MAX_REPO_LENGTH) {\n    throw new Error(`Repository name exceeds maximum length (${MAX_REPO_LENGTH} characters)`);\n  }\n  // Basic format check: owner/repo or URL\n  if (!repository.includes('/')) {\n    throw new Error(\"Repository must be in format 'owner/repo' or a valid URL\");\n  }\n}\n\n/**\n * Validates webhook URL to prevent SSRF attacks\n * Only allows HTTPS URLs to external hosts\n */\nfunction validateWebhookUrl(url: string): void {\n  if (!url || typeof url !== 'string') {\n    throw new Error('Webhook URL is required and must be a string');\n  }\n\n  let parsed: URL;\n  try {\n    parsed = new URL(url);\n  } catch {\n    throw new Error('Webhook URL is not a valid URL');\n  }\n\n  // Security: Only allow HTTPS\n  if (parsed.protocol !== 'https:') {\n    throw new Error('Webhook URL must use HTTPS protocol');\n  }\n\n  // Security: Block internal/private IP ranges\n  const hostname = parsed.hostname.toLowerCase();\n  const blockedPatterns = [\n    /^localhost$/i,\n    /^127\\./,\n    /^10\\./,\n    /^172\\.(1[6-9]|2[0-9]|3[0-1])\\./,\n    /^192\\.168\\./,\n    /^169\\.254\\./,\n    /^0\\./,\n    /^\\[::1\\]$/,\n    /^\\[fc/i,\n    /^\\[fd/i,\n    /^\\[fe80:/i,\n    /^metadata\\./i,\n    /^internal\\./i,\n    /\\.local$/i,\n    /\\.internal$/i,\n  ];\n\n  for (const pattern of blockedPatterns) {\n    if (pattern.test(hostname)) {\n      throw new Error('Webhook URL cannot point to internal/private addresses');\n    }\n  }\n\n  // Security: Block common cloud metadata endpoints\n  if (hostname === '169.254.169.254' || hostname.includes('metadata.google')) {\n    throw new Error('Webhook URL cannot point to cloud metadata services');\n  }\n}\n\n/**\n * Sanitizes error messages to prevent sensitive data leakage\n */\nfunction sanitizeError(error: unknown): string {\n  const message = error instanceof Error ? error.message : String(error);\n  // Remove potential API keys, tokens, or sensitive patterns\n  return message\n    .replace(/Bearer\\s+[a-zA-Z0-9._-]+/gi, 'Bearer [REDACTED]')\n    .replace(/api[_-]?key[=:]\\s*[\"']?[a-zA-Z0-9._-]+[\"']?/gi, 'api_key=[REDACTED]')\n    .replace(/token[=:]\\s*[\"']?[a-zA-Z0-9._-]+[\"']?/gi, 'token=[REDACTED]');\n}\n\nexport class CursorAPI {\n  private readonly apiKey: string;\n  private readonly timeout: number;\n  private readonly baseUrl: string;\n  private readonly maxRetries: number;\n  private readonly retryDelay: number;\n\n  constructor(options: CursorAPIOptions = {}) {\n    // Check for API key in order: options, CURSOR_API_KEY\n    this.apiKey = options.apiKey ?? process.env.CURSOR_API_KEY ?? '';\n    this.timeout = options.timeout ?? 60000;\n    // Security: Only allow baseUrl via explicit programmatic configuration\n    // Do NOT allow env var override to prevent SSRF attacks\n    this.baseUrl = options.baseUrl ?? DEFAULT_BASE_URL;\n    this.maxRetries = options.maxRetries ?? DEFAULT_MAX_RETRIES;\n    this.retryDelay = options.retryDelay ?? DEFAULT_RETRY_DELAY;\n\n    if (!this.apiKey) {\n      throw new Error('CURSOR_API_KEY is required. Set it in environment or pass to constructor.');\n    }\n  }\n\n  /**\n   * Check if API key is available\n   */\n  static isAvailable(): boolean {\n    return !!process.env.CURSOR_API_KEY;\n  }\n\n  private async request<T>(\n    endpoint: string,\n    method: string = 'GET',\n    body?: object,\n    attempt: number = 0\n  ): Promise<Result<T>> {\n    const url = `${this.baseUrl}${endpoint}`;\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), this.timeout);\n\n    try {\n      const response = await fetch(url, {\n        method,\n        headers: {\n          Authorization: `Bearer ${this.apiKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: body ? JSON.stringify(body) : undefined,\n        signal: controller.signal,\n      });\n\n      if (!response.ok) {\n        // Check if we should retry\n        if (attempt < this.maxRetries && RETRYABLE_STATUS_CODES.includes(response.status)) {\n          const delay = this.retryDelay * 2 ** attempt;\n          log.warn(\n            `API Error ${response.status} on ${method} ${endpoint}. Retrying in ${delay}ms... (Attempt ${attempt + 1}/${this.maxRetries})`\n          );\n          await new Promise((resolve) => setTimeout(resolve, delay));\n          return this.request<T>(endpoint, method, body, attempt + 1);\n        }\n\n        const errorText = await response.text();\n        let details: string;\n        try {\n          const parsed = JSON.parse(errorText);\n          details = parsed.message || parsed.error || 'Unknown API error';\n        } catch {\n          details = sanitizeError(errorText);\n        }\n\n        return {\n          success: false,\n          error: `API Error ${response.status}: ${details}`,\n        };\n      }\n\n      // Handle empty responses (e.g., 204 No Content)\n      const contentType = response.headers.get('content-type');\n      if (!contentType || !contentType.includes('application/json')) {\n        return { success: true, data: {} as T };\n      }\n\n      const text = await response.text();\n      if (!text || text.trim() === '') {\n        return { success: true, data: {} as T };\n      }\n\n      try {\n        const data = JSON.parse(text) as T;\n        return { success: true, data };\n      } catch {\n        return {\n          success: false,\n          error: 'Invalid JSON response from API',\n        };\n      }\n    } catch (error) {\n      if (error instanceof Error && error.name === 'AbortError') {\n        // Timeouts are also retryable\n        if (attempt < this.maxRetries) {\n          const delay = this.retryDelay * 2 ** attempt;\n          log.warn(\n            `Request timeout on ${method} ${endpoint}. Retrying in ${delay}ms... (Attempt ${attempt + 1}/${this.maxRetries})`\n          );\n          await new Promise((resolve) => setTimeout(resolve, delay));\n          return this.request<T>(endpoint, method, body, attempt + 1);\n        }\n        return { success: false, error: `Request timeout after ${this.timeout}ms` };\n      }\n\n      // Network errors (TypeError) or specific connection errors are also retryable\n      if (\n        attempt < this.maxRetries &&\n        (error instanceof TypeError ||\n          (error instanceof Error &&\n            (error.message.includes('network') ||\n              error.message.includes('fetch') ||\n              error.message.includes('connection'))))\n      ) {\n        const delay = this.retryDelay * 2 ** attempt;\n        log.warn(\n          `Network error on ${method} ${endpoint}: ${sanitizeError(error)}. Retrying in ${delay}ms... (Attempt ${attempt + 1}/${this.maxRetries})`\n        );\n        await new Promise((resolve) => setTimeout(resolve, delay));\n        return this.request<T>(endpoint, method, body, attempt + 1);\n      }\n\n      return { success: false, error: sanitizeError(error) };\n    } finally {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  /**\n   * List all agents\n   */\n  async listAgents(): Promise<Result<Agent[]>> {\n    const result = await this.request<{ agents: Agent[]; nextCursor?: string }>('/agents');\n    if (!result.success) return { success: false, error: result.error };\n    return { success: true, data: result.data?.agents ?? [] };\n  }\n\n  /**\n   * Get status of a specific agent\n   */\n  async getAgentStatus(agentId: string): Promise<Result<Agent>> {\n    validateAgentId(agentId);\n    const encodedId = encodeURIComponent(agentId);\n    return this.request<Agent>(`/agents/${encodedId}`);\n  }\n\n  /**\n   * Get conversation history for an agent\n   */\n  async getAgentConversation(agentId: string): Promise<Result<Conversation>> {\n    validateAgentId(agentId);\n    const encodedId = encodeURIComponent(agentId);\n    return this.request<Conversation>(`/agents/${encodedId}/conversation`);\n  }\n\n  /**\n   * Launch a new agent\n   *\n   * API Spec: https://cursor.com/docs/cloud-agent/api/endpoints\n   */\n  async launchAgent(options: {\n    prompt: {\n      text: string;\n      images?: Array<{ data: string; dimension?: { width: number; height: number } }>;\n    };\n    source: {\n      repository: string;\n      ref?: string;\n    };\n    target?: {\n      autoCreatePr?: boolean;\n      branchName?: string;\n      openAsCursorGithubApp?: boolean;\n      skipReviewerRequest?: boolean;\n    };\n    webhook?: {\n      url: string;\n      secret?: string;\n    };\n  }): Promise<Result<Agent>> {\n    validatePromptText(options.prompt.text);\n    validateRepository(options.source.repository);\n\n    if (options.source.ref !== undefined) {\n      if (typeof options.source.ref !== 'string' || options.source.ref.length > 200) {\n        throw new Error('Invalid ref: must be a string under 200 characters');\n      }\n    }\n\n    // Security: Validate webhook URL to prevent SSRF\n    if (options.webhook?.url) {\n      validateWebhookUrl(options.webhook.url);\n    }\n\n    return this.request<Agent>('/agents', 'POST', options);\n  }\n\n  /**\n   * Send a follow-up message to an agent\n   */\n  async addFollowup(agentId: string, prompt: { text: string }): Promise<Result<void>> {\n    validateAgentId(agentId);\n    validatePromptText(prompt.text);\n    const encodedId = encodeURIComponent(agentId);\n    return this.request<void>(`/agents/${encodedId}/followup`, 'POST', { prompt });\n  }\n\n  /**\n   * List available repositories\n   */\n  async listRepositories(): Promise<Result<Repository[]>> {\n    const result = await this.request<{ repositories: Repository[] }>('/repositories');\n    if (!result.success) return { success: false, error: result.error };\n    return { success: true, data: result.data?.repositories ?? [] };\n  }\n\n  /**\n   * List available models\n   *\n   * API Spec: https://cursor.com/docs/cloud-agent/api/endpoints#list-models\n   */\n  async listModels(): Promise<Result<string[]>> {\n    const result = await this.request<{ models: string[] }>('/models');\n    if (!result.success) return { success: false, error: result.error };\n    return { success: true, data: result.data?.models ?? [] };\n  }\n}\n","/**\n * GitHubClient - Unified GitHub API client\n *\n * Provides GitHub API operations with:\n * - Intelligent token switching based on organization\n * - Consistent identity for PR reviews\n * - CI status and feedback collection\n * - Safe git operations (no shell injection)\n *\n * This consolidates the former token-aware client and triage client.\n */\n\nimport { spawnSync } from 'node:child_process';\nimport { Octokit } from '@octokit/rest';\nimport { log } from '../core/config.js';\nimport { extractOrg, getPRReviewToken, getTokenForRepo } from '../core/tokens.js';\nimport type { PRComment, PullRequest, Repository, Result } from '../core/types.js';\nimport type {\n  CICheck,\n  CIStatus,\n  FeedbackItem,\n  FeedbackSeverity,\n  FeedbackStatus,\n} from '../triage/types.js';\n\n// ============================================\n// Octokit Cache (one per token)\n// ============================================\n\nconst octokitCache = new Map<string, Octokit>();\n\nfunction getOctokit(token: string): Octokit {\n  let octokit = octokitCache.get(token);\n  if (!octokit) {\n    octokit = new Octokit({ auth: token });\n    octokitCache.set(token, octokit);\n  }\n  return octokit;\n}\n\n// ============================================\n// Configuration\n// ============================================\n\nexport interface GitHubClientConfig {\n  /** Token for authentication */\n  token?: string;\n  /** Repository owner */\n  owner?: string;\n  /** Repository name */\n  repo?: string;\n}\n\n// ============================================\n// GitHub Client Class\n// ============================================\n\nexport class GitHubClient {\n  private token: string | null;\n  private owner: string | null;\n  private repo: string | null;\n\n  /**\n   * Create a new GitHubClient.\n   *\n   * Can be used in two modes:\n   * 1. With explicit config: new GitHubClient({ token, owner, repo })\n   * 2. Token-aware mode: new GitHubClient() - uses token based on repo\n   */\n  constructor(config: GitHubClientConfig = {}) {\n    this.token = config.token ?? null;\n    this.owner = config.owner ?? null;\n    this.repo = config.repo ?? null;\n  }\n\n  // ============================================\n  // Token Management (Static Methods)\n  // ============================================\n\n  /**\n   * Get an Octokit instance for a repository.\n   * Automatically selects the correct token based on org.\n   */\n  static forRepo(repoUrl: string): Octokit | null {\n    const token = getTokenForRepo(repoUrl);\n    if (!token) {\n      log.warn(`No token available for repo: ${repoUrl}`);\n      return null;\n    }\n    return getOctokit(token);\n  }\n\n  /**\n   * Get an Octokit instance for PR review operations.\n   * Always uses the consistent PR review identity.\n   */\n  static forPRReview(): Octokit | null {\n    const token = getPRReviewToken();\n    if (!token) {\n      log.warn('No PR review token available');\n      return null;\n    }\n    return getOctokit(token);\n  }\n\n  // ============================================\n  // Instance Helpers\n  // ============================================\n\n  private getOctokitInstance(): Octokit {\n    if (this.token) {\n      return getOctokit(this.token);\n    }\n    if (this.owner && this.repo) {\n      const octokit = GitHubClient.forRepo(`${this.owner}/${this.repo}`);\n      if (!octokit) {\n        throw new Error(`No token available for ${this.owner}/${this.repo}`);\n      }\n      return octokit;\n    }\n    throw new Error('GitHubClient requires either token or owner/repo');\n  }\n\n  private ensureRepo(): { owner: string; repo: string } {\n    if (!this.owner || !this.repo) {\n      throw new Error('owner and repo are required for this operation');\n    }\n    return { owner: this.owner, repo: this.repo };\n  }\n\n  // ============================================\n  // Repository Operations (Static)\n  // ============================================\n\n  /**\n   * Get repository information\n   */\n  static async getRepo(owner: string, repo: string): Promise<Result<Repository>> {\n    const octokit = GitHubClient.forRepo(`${owner}/${repo}`);\n    if (!octokit) {\n      return { success: false, error: 'No token available for this repository' };\n    }\n\n    try {\n      const { data } = await octokit.repos.get({ owner, repo });\n      return {\n        success: true,\n        data: {\n          owner: data.owner.login,\n          name: data.name,\n          fullName: data.full_name,\n          defaultBranch: data.default_branch,\n          isPrivate: data.private,\n          url: data.html_url,\n        },\n      };\n    } catch (error) {\n      return { success: false, error: String(error) };\n    }\n  }\n\n  /**\n   * List repositories for an organization\n   */\n  static async listOrgRepos(\n    org: string,\n    options?: {\n      type?: 'all' | 'public' | 'private' | 'forks' | 'sources' | 'member';\n      perPage?: number;\n    }\n  ): Promise<Result<Repository[]>> {\n    const octokit = GitHubClient.forRepo(`${org}/any`);\n    if (!octokit) {\n      return { success: false, error: `No token available for org: ${org}` };\n    }\n\n    try {\n      const { data } = await octokit.repos.listForOrg({\n        org,\n        type: options?.type ?? 'all',\n        per_page: options?.perPage ?? 100,\n      });\n\n      return {\n        success: true,\n        data: data.map((r) => ({\n          owner: r.owner.login,\n          name: r.name,\n          fullName: r.full_name,\n          defaultBranch: r.default_branch ?? 'main',\n          isPrivate: r.private,\n          url: r.html_url,\n        })),\n      };\n    } catch (error) {\n      return { success: false, error: String(error) };\n    }\n  }\n\n  // ============================================\n  // Pull Request Operations\n  // ============================================\n\n  /**\n   * Get pull request information (static version)\n   */\n  static async getPRStatic(\n    owner: string,\n    repo: string,\n    prNumber: number\n  ): Promise<Result<PullRequest>> {\n    const octokit = GitHubClient.forRepo(`${owner}/${repo}`);\n    if (!octokit) {\n      return { success: false, error: 'No token available for this repository' };\n    }\n\n    try {\n      const { data } = await octokit.pulls.get({ owner, repo, pull_number: prNumber });\n      return {\n        success: true,\n        data: {\n          number: data.number,\n          title: data.title,\n          body: data.body ?? undefined,\n          state: data.state as 'open' | 'closed',\n          draft: data.draft ?? false,\n          url: data.html_url,\n          headBranch: data.head.ref,\n          baseBranch: data.base.ref,\n          author: data.user?.login ?? 'unknown',\n        },\n      };\n    } catch (error) {\n      return { success: false, error: String(error) };\n    }\n  }\n\n  /**\n   * Get pull request (instance version with full data)\n   */\n  async getPR(prNumber: number) {\n    const { owner, repo } = this.ensureRepo();\n    const octokit = this.getOctokitInstance();\n    const { data } = await octokit.pulls.get({\n      owner,\n      repo,\n      pull_number: prNumber,\n    });\n    return data;\n  }\n\n  /**\n   * Get files changed in a PR\n   */\n  async getPRFiles(prNumber: number) {\n    const { owner, repo } = this.ensureRepo();\n    const octokit = this.getOctokitInstance();\n    const { data } = await octokit.pulls.listFiles({\n      owner,\n      repo,\n      pull_number: prNumber,\n    });\n    return data;\n  }\n\n  /**\n   * Create a pull request\n   */\n  static async createPR(\n    owner: string,\n    repo: string,\n    options: {\n      title: string;\n      body?: string;\n      head: string;\n      base: string;\n      draft?: boolean;\n    }\n  ): Promise<Result<PullRequest>> {\n    const octokit = GitHubClient.forRepo(`${owner}/${repo}`);\n    if (!octokit) {\n      return { success: false, error: 'No token available for this repository' };\n    }\n\n    try {\n      const { data } = await octokit.pulls.create({\n        owner,\n        repo,\n        title: options.title,\n        body: options.body,\n        head: options.head,\n        base: options.base,\n        draft: options.draft,\n      });\n\n      return {\n        success: true,\n        data: {\n          number: data.number,\n          title: data.title,\n          body: data.body ?? undefined,\n          state: data.state as 'open' | 'closed',\n          draft: data.draft ?? false,\n          url: data.html_url,\n          headBranch: data.head.ref,\n          baseBranch: data.base.ref,\n          author: data.user?.login ?? 'unknown',\n        },\n      };\n    } catch (error) {\n      return { success: false, error: String(error) };\n    }\n  }\n\n  /**\n   * Merge a pull request\n   */\n  static async mergePRStatic(\n    owner: string,\n    repo: string,\n    prNumber: number,\n    options?: {\n      mergeMethod?: 'merge' | 'squash' | 'rebase';\n      commitTitle?: string;\n      commitMessage?: string;\n    }\n  ): Promise<Result<void>> {\n    const octokit = GitHubClient.forRepo(`${owner}/${repo}`);\n    if (!octokit) {\n      return { success: false, error: 'No token available for this repository' };\n    }\n\n    try {\n      await octokit.pulls.merge({\n        owner,\n        repo,\n        pull_number: prNumber,\n        merge_method: options?.mergeMethod ?? 'squash',\n        commit_title: options?.commitTitle,\n        commit_message: options?.commitMessage,\n      });\n\n      return { success: true };\n    } catch (error) {\n      return { success: false, error: String(error) };\n    }\n  }\n\n  /**\n   * Merge a pull request (instance version)\n   */\n  async mergePR(prNumber: number, method: 'merge' | 'squash' | 'rebase' = 'squash') {\n    const { owner, repo } = this.ensureRepo();\n    const octokit = this.getOctokitInstance();\n    const { data } = await octokit.pulls.merge({\n      owner,\n      repo,\n      pull_number: prNumber,\n      merge_method: method,\n    });\n    return data;\n  }\n\n  // ============================================\n  // Reviews and Comments\n  // ============================================\n\n  /**\n   * Get reviews on a PR\n   */\n  async getReviews(prNumber: number) {\n    const { owner, repo } = this.ensureRepo();\n    const octokit = this.getOctokitInstance();\n    const { data } = await octokit.pulls.listReviews({\n      owner,\n      repo,\n      pull_number: prNumber,\n    });\n    return data;\n  }\n\n  /**\n   * Get review comments on a PR\n   */\n  async getReviewComments(prNumber: number) {\n    const { owner, repo } = this.ensureRepo();\n    const octokit = this.getOctokitInstance();\n    const { data } = await octokit.pulls.listReviewComments({\n      owner,\n      repo,\n      pull_number: prNumber,\n    });\n    return data;\n  }\n\n  /**\n   * Get issue comments on a PR\n   */\n  async getIssueComments(prNumber: number) {\n    const { owner, repo } = this.ensureRepo();\n    const octokit = this.getOctokitInstance();\n    const { data } = await octokit.issues.listComments({\n      owner,\n      repo,\n      issue_number: prNumber,\n    });\n    return data;\n  }\n\n  /**\n   * List PR comments (static version)\n   */\n  static async listPRComments(\n    owner: string,\n    repo: string,\n    prNumber: number\n  ): Promise<Result<PRComment[]>> {\n    const octokit = GitHubClient.forRepo(`${owner}/${repo}`);\n    if (!octokit) {\n      return { success: false, error: 'No token available for this repository' };\n    }\n\n    try {\n      const { data } = await octokit.issues.listComments({\n        owner,\n        repo,\n        issue_number: prNumber,\n        per_page: 100,\n      });\n\n      return {\n        success: true,\n        data: data.map((c) => ({\n          id: c.id,\n          body: c.body ?? '',\n          author: c.user?.login ?? 'unknown',\n          createdAt: c.created_at,\n          updatedAt: c.updated_at,\n        })),\n      };\n    } catch (error) {\n      return { success: false, error: String(error) };\n    }\n  }\n\n  /**\n   * Post a PR comment (ALWAYS uses PR review identity)\n   */\n  static async postPRComment(\n    owner: string,\n    repo: string,\n    prNumber: number,\n    body: string\n  ): Promise<Result<PRComment>> {\n    const octokit = GitHubClient.forPRReview();\n    if (!octokit) {\n      return { success: false, error: 'No PR review token available' };\n    }\n\n    try {\n      const { data } = await octokit.issues.createComment({\n        owner,\n        repo,\n        issue_number: prNumber,\n        body,\n      });\n\n      return {\n        success: true,\n        data: {\n          id: data.id,\n          body: data.body ?? '',\n          author: data.user?.login ?? 'unknown',\n          createdAt: data.created_at,\n          updatedAt: data.updated_at,\n        },\n      };\n    } catch (error) {\n      return { success: false, error: String(error) };\n    }\n  }\n\n  /**\n   * Post a comment (instance version)\n   */\n  async postComment(prNumber: number, body: string) {\n    const { owner, repo } = this.ensureRepo();\n    const octokit = this.getOctokitInstance();\n    const { data } = await octokit.issues.createComment({\n      owner,\n      repo,\n      issue_number: prNumber,\n      body,\n    });\n    return data;\n  }\n\n  /**\n   * Reply to a review comment\n   */\n  async replyToComment(prNumber: number, commentId: number, body: string) {\n    const { owner, repo } = this.ensureRepo();\n    const octokit = this.getOctokitInstance();\n    const { data } = await octokit.pulls.createReplyForReviewComment({\n      owner,\n      repo,\n      pull_number: prNumber,\n      comment_id: commentId,\n      body,\n    });\n    return data;\n  }\n\n  /**\n   * Request a review on a PR (ALWAYS uses PR review identity)\n   */\n  static async requestReview(\n    owner: string,\n    repo: string,\n    prNumber: number,\n    reviewers: string[]\n  ): Promise<Result<void>> {\n    const octokit = GitHubClient.forPRReview();\n    if (!octokit) {\n      return { success: false, error: 'No PR review token available' };\n    }\n\n    try {\n      await octokit.pulls.requestReviewers({\n        owner,\n        repo,\n        pull_number: prNumber,\n        reviewers,\n      });\n\n      return { success: true };\n    } catch (error) {\n      return { success: false, error: String(error) };\n    }\n  }\n\n  // ============================================\n  // CI Status\n  // ============================================\n\n  /**\n   * Get CI status for a PR\n   */\n  async getCIStatus(prNumber: number): Promise<CIStatus> {\n    const { owner, repo } = this.ensureRepo();\n    const octokit = this.getOctokitInstance();\n\n    const pr = await this.getPR(prNumber);\n    const ref = pr.head.sha;\n\n    const { data: checkRuns } = await octokit.checks.listForRef({\n      owner,\n      repo,\n      ref,\n    });\n\n    const checks: CICheck[] = checkRuns.check_runs.map((run) => ({\n      name: run.name,\n      status: this.mapCheckStatus(run.status, run.conclusion),\n      conclusion: run.conclusion,\n      url: run.html_url ?? '',\n      startedAt: run.started_at,\n      completedAt: run.completed_at,\n    }));\n\n    const failures = checks.filter((c) => c.status === 'failure');\n    const pending = checks.filter((c) => c.status === 'pending' || c.status === 'in_progress');\n\n    return {\n      allPassing: failures.length === 0 && pending.length === 0,\n      anyPending: pending.length > 0,\n      checks,\n      failures,\n    };\n  }\n\n  private mapCheckStatus(status: string, conclusion: string | null): CICheck['status'] {\n    if (status === 'queued' || status === 'pending') return 'pending';\n    if (status === 'in_progress') return 'in_progress';\n    if (conclusion === 'success') return 'success';\n    if (conclusion === 'failure' || conclusion === 'timed_out') return 'failure';\n    if (conclusion === 'skipped' || conclusion === 'cancelled') return 'skipped';\n    return 'pending';\n  }\n\n  // ============================================\n  // Feedback Collection\n  // ============================================\n\n  /**\n   * Collect all feedback on a PR\n   */\n  async collectFeedback(prNumber: number): Promise<FeedbackItem[]> {\n    const [reviewComments, reviews] = await Promise.all([\n      this.getReviewComments(prNumber),\n      this.getReviews(prNumber),\n    ]);\n\n    const feedbackItems: FeedbackItem[] = [];\n\n    // Process inline review comments\n    for (const comment of reviewComments) {\n      const severity = this.inferSeverity(comment.body);\n      feedbackItems.push({\n        id: `comment-${comment.id}`,\n        author: comment.user?.login ?? 'unknown',\n        body: comment.body,\n        path: comment.path,\n        line: comment.line ?? comment.original_line ?? null,\n        severity,\n        status: this.inferStatus(comment),\n        createdAt: comment.created_at,\n        url: comment.html_url,\n        isAutoResolvable: this.isAutoResolvable(comment.body, severity),\n        suggestedAction: this.extractSuggestion(comment.body),\n        resolution: null,\n      });\n    }\n\n    // Process review bodies (summary comments)\n    for (const review of reviews) {\n      if (!review.body || review.body.trim() === '') continue;\n\n      const severity = this.inferSeverity(review.body);\n      feedbackItems.push({\n        id: `review-${review.id}`,\n        author: review.user?.login ?? 'unknown',\n        body: review.body,\n        path: null,\n        line: null,\n        severity,\n        status: 'addressed', // Review summaries are informational\n        createdAt: review.submitted_at ?? new Date().toISOString(),\n        url: review.html_url,\n        isAutoResolvable: false,\n        suggestedAction: null,\n        resolution: null,\n      });\n    }\n\n    return feedbackItems;\n  }\n\n  private inferSeverity(body: string): FeedbackSeverity {\n    const lower = body.toLowerCase();\n\n    if (body.includes('') || body.includes(':stop_sign:') || lower.includes('critical')) {\n      return 'critical';\n    }\n    if (body.includes('medium-priority') || lower.includes('high severity')) {\n      return 'high';\n    }\n    if (body.includes('medium') || lower.includes('should')) {\n      return 'medium';\n    }\n    if (body.includes('nitpick') || body.includes('nit:') || lower.includes('consider')) {\n      return 'low';\n    }\n    if (body.includes('info') || body.includes('note:')) {\n      return 'info';\n    }\n\n    if (lower.includes('error') || lower.includes('bug') || lower.includes('fix')) {\n      return 'high';\n    }\n\n    return 'medium';\n  }\n\n  private inferStatus(comment: { body: string; in_reply_to_id?: number }): FeedbackStatus {\n    if (comment.in_reply_to_id) {\n      return 'addressed';\n    }\n    return 'unaddressed';\n  }\n\n  private isAutoResolvable(body: string, severity: FeedbackSeverity): boolean {\n    if (body.includes('```suggestion')) return true;\n    if (severity === 'low' || severity === 'info') return true;\n\n    const lower = body.toLowerCase();\n    if (lower.includes('formatting') || lower.includes('typo') || lower.includes('spelling')) {\n      return true;\n    }\n\n    return false;\n  }\n\n  private extractSuggestion(body: string): string | null {\n    const suggestionMatch = body.match(/```suggestion\\n([\\s\\S]*?)```/);\n    const suggestion = suggestionMatch?.[1];\n    if (suggestion !== undefined) {\n      return suggestion.trim();\n    }\n    return null;\n  }\n}\n\n// ============================================\n// Safe Git Operations\n// ============================================\n\n/**\n * Clone a repository with appropriate token.\n * Uses spawnSync for safe command execution (no shell injection).\n */\nexport function cloneRepo(repoUrl: string, destPath: string): Result<void> {\n  const token = getTokenForRepo(repoUrl);\n  if (!token) {\n    return { success: false, error: `No token available for repo: ${repoUrl}` };\n  }\n\n  let cloneUrl = repoUrl;\n  if (cloneUrl.startsWith('https://github.com/')) {\n    cloneUrl = cloneUrl.replace('https://github.com/', `https://oauth2:${token}@github.com/`);\n  } else if (!cloneUrl.includes('@') && !cloneUrl.startsWith('https://')) {\n    const org = extractOrg(repoUrl);\n    const repoName = repoUrl.replace(`${org}/`, '');\n    cloneUrl = `https://oauth2:${token}@github.com/${org}/${repoName}.git`;\n  }\n\n  const proc = spawnSync('git', ['clone', cloneUrl, destPath], {\n    encoding: 'utf-8',\n    stdio: 'pipe',\n    timeout: 120000,\n  });\n\n  if (proc.error) {\n    return { success: false, error: `Git clone error: ${proc.error.message}` };\n  }\n\n  if (proc.status !== 0) {\n    const errorOutput = (proc.stderr || 'Unknown error').replace(\n      /oauth2:[^@]+@/g,\n      'oauth2:[REDACTED]@'\n    );\n    return { success: false, error: `Git clone failed: ${errorOutput}` };\n  }\n\n  return { success: true };\n}\n\n/**\n * Validate a git ref/branch name to prevent injection\n */\nexport function isValidGitRef(ref: string): boolean {\n  return /^[a-zA-Z0-9._/-]+$/.test(ref) && ref.length <= 200;\n}\n\n/**\n * Validate owner/repo format\n */\nexport function isValidRepoFormat(repo: string): boolean {\n  return /^[a-zA-Z0-9._-]+\\/[a-zA-Z0-9._-]+$/.test(repo) && repo.length <= 200;\n}\n\n// ============================================\n// Configuration Type Export\n// ============================================\n\nexport type { GitHubClientConfig as GitHubConfig };\n","/**\n * Fleet - High-level API for Cursor Background Agent management\n *\n * Provides a clean interface for:\n * - Listing and monitoring agents\n * - Spawning new agents with context and model specification\n * - Sending follow-up messages\n * - Archiving conversations\n * - Diamond pattern orchestration\n * - Token-aware GitHub coordination\n *\n * All configuration is user-provided - no hardcoded values.\n */\n\nimport { mkdir, writeFile } from 'node:fs/promises';\nimport { dirname, join } from 'node:path';\nimport { log } from '../core/config.js';\nimport { extractOrg } from '../core/tokens.js';\nimport type {\n  Agent,\n  AgentStatus,\n  Conversation,\n  DiamondConfig,\n  PRComment,\n  Repository,\n  Result,\n  SpawnOptions,\n} from '../core/types.js';\nimport { GitHubClient } from '../github/client.js';\nimport { CursorAPI, type CursorAPIOptions } from './cursor-api.js';\n\n// ============================================\n// Types\n// ============================================\n\nexport interface FleetConfig extends CursorAPIOptions {\n  /** Path to archive conversations (default: ./memory-bank/recovery) */\n  archivePath?: string;\n}\n\nexport interface CoordinationConfig {\n  /** PR number for coordination channel */\n  coordinationPr: number;\n  /** Repository in owner/repo format */\n  repo: string;\n  /** Outbound poll interval (ms) - check agents */\n  outboundInterval?: number;\n  /** Inbound poll interval (ms) - check PR comments */\n  inboundInterval?: number;\n  /** Agent IDs to monitor */\n  agentIds?: string[];\n}\n\nexport interface SpawnContext {\n  controlManagerId?: string;\n  controlCenter?: string;\n  relatedAgents?: string[];\n  metadata?: Record<string, unknown>;\n}\n\n// ============================================\n// Fleet Class\n// ============================================\n\n/**\n * Fleet management for Cursor Background Agents\n *\n * Provides high-level operations for managing AI agents across multiple\n * GitHub organizations with automatic token switching and coordination.\n *\n * @example\n * ```typescript\n * const fleet = new Fleet();\n *\n * // Spawn a new agent\n * const result = await fleet.spawn({\n *   repository: 'https://github.com/owner/repo',\n *   task: 'Fix the authentication bug',\n *   target: { autoCreatePr: true }\n * });\n *\n * // Monitor agent status\n * const status = await fleet.status(result.data.id);\n * ```\n */\nexport class Fleet {\n  private api: CursorAPI | null;\n  private archivePath: string;\n  private useDirectApi: boolean;\n\n  /**\n   * Create a new Fleet instance\n   *\n   * @param config - Fleet configuration options including API key and timeout\n   */\n  constructor(config: FleetConfig = {}) {\n    this.archivePath = config.archivePath ?? './memory-bank/recovery';\n\n    // Try to initialize CursorAPI for direct access\n    try {\n      this.api = new CursorAPI({\n        apiKey: config.apiKey,\n        timeout: config.timeout,\n        maxRetries: config.maxRetries,\n        retryDelay: config.retryDelay,\n      });\n      this.useDirectApi = true;\n    } catch {\n      // API key not available\n      this.api = null;\n      this.useDirectApi = false;\n      log.debug('CursorAPI not available, some operations will fail');\n    }\n  }\n\n  /**\n   * Check if direct API is available\n   */\n  isApiAvailable(): boolean {\n    return this.useDirectApi && this.api !== null;\n  }\n\n  // ============================================\n  // Agent Discovery\n  // ============================================\n\n  /**\n   * List all agents\n   */\n  async list(): Promise<Result<Agent[]>> {\n    if (!this.api) {\n      return { success: false, error: 'Cursor API not available' };\n    }\n    return this.api.listAgents();\n  }\n\n  /**\n   * List agents filtered by status\n   */\n  async listByStatus(status: AgentStatus): Promise<Result<Agent[]>> {\n    const result = await this.list();\n    if (!result.success) return result;\n    return {\n      success: true,\n      data: result.data?.filter((a) => a.status === status) ?? [],\n    };\n  }\n\n  /**\n   * Get running agents only\n   */\n  async running(): Promise<Result<Agent[]>> {\n    return this.listByStatus('RUNNING');\n  }\n\n  /**\n   * Find agent by ID\n   */\n  async find(agentId: string): Promise<Result<Agent | undefined>> {\n    const result = await this.list();\n    if (!result.success) return { success: false, error: result.error };\n    return { success: true, data: result.data?.find((a) => a.id === agentId) };\n  }\n\n  /**\n   * Get agent status\n   */\n  async status(agentId: string): Promise<Result<Agent>> {\n    if (!this.api) {\n      return { success: false, error: 'Cursor API not available' };\n    }\n    return this.api.getAgentStatus(agentId);\n  }\n\n  // ============================================\n  // Agent Spawning\n  // ============================================\n\n  /**\n   * Spawn a new agent\n   *\n   * API Spec: https://cursor.com/docs/cloud-agent/api/endpoints\n   *\n   * @param options - Spawn options including repository, task, ref, target, and webhook\n   */\n  async spawn(options: SpawnOptions & { context?: SpawnContext }): Promise<Result<Agent>> {\n    if (!this.api) {\n      return { success: false, error: 'Cursor API not available' };\n    }\n\n    const task = this.buildTaskWithContext(options.task, options.context);\n\n    log.info(`Spawning agent in ${options.repository}`);\n\n    return this.api.launchAgent({\n      prompt: { text: task },\n      source: {\n        repository: options.repository,\n        ref: options.ref ?? 'main',\n      },\n      target: options.target,\n      webhook: options.webhook,\n    });\n  }\n\n  /**\n   * Build task string with coordination context\n   */\n  private buildTaskWithContext(task: string, context?: SpawnContext): string {\n    if (!context) return task;\n\n    const lines = [task, '', '--- COORDINATION CONTEXT ---'];\n\n    if (context.controlManagerId) {\n      lines.push(`Control Manager Agent: ${context.controlManagerId}`);\n    }\n    if (context.controlCenter) {\n      lines.push(`Control Center: ${context.controlCenter}`);\n    }\n    if (context.relatedAgents?.length) {\n      lines.push(`Related Agents: ${context.relatedAgents.join(', ')}`);\n    }\n    if (context.metadata) {\n      lines.push(`Metadata: ${JSON.stringify(context.metadata)}`);\n    }\n    lines.push('Report progress via PR comments and addFollowup.');\n    lines.push('--- END CONTEXT ---');\n\n    return lines.join('\\n');\n  }\n\n  // ============================================\n  // Agent Communication\n  // ============================================\n\n  /**\n   * Send a follow-up message to an agent\n   */\n  async followup(agentId: string, message: string): Promise<Result<void>> {\n    if (!this.api) {\n      return { success: false, error: 'Cursor API not available' };\n    }\n    return this.api.addFollowup(agentId, { text: message });\n  }\n\n  /**\n   * Broadcast message to multiple agents\n   */\n  async broadcast(agentIds: string[], message: string): Promise<Map<string, Result<void>>> {\n    const results = new Map<string, Result<void>>();\n\n    await Promise.all(\n      agentIds.map(async (id) => {\n        results.set(id, await this.followup(id, message));\n      })\n    );\n\n    return results;\n  }\n\n  // ============================================\n  // Conversations\n  // ============================================\n\n  /**\n   * Get agent conversation\n   */\n  async conversation(agentId: string): Promise<Result<Conversation>> {\n    if (!this.api) {\n      return { success: false, error: 'Cursor API not available' };\n    }\n    return this.api.getAgentConversation(agentId);\n  }\n\n  /**\n   * Archive agent conversation to disk\n   */\n  async archive(agentId: string, outputPath?: string): Promise<Result<string>> {\n    const conv = await this.conversation(agentId);\n    if (!conv.success) return { success: false, error: conv.error };\n\n    const path = outputPath ?? join(this.archivePath, `conversation-${agentId}.json`);\n\n    try {\n      await mkdir(dirname(path), { recursive: true });\n      await writeFile(path, JSON.stringify(conv.data, null, 2));\n      return { success: true, data: path };\n    } catch (error) {\n      return { success: false, error: String(error) };\n    }\n  }\n\n  // ============================================\n  // Repositories\n  // ============================================\n\n  /**\n   * List available repositories\n   */\n  async repositories(): Promise<Result<Repository[]>> {\n    if (!this.api) {\n      return { success: false, error: 'Cursor API not available' };\n    }\n    return this.api.listRepositories();\n  }\n\n  /**\n   * List available Cursor models\n   */\n  async listModels(): Promise<Result<string[]>> {\n    if (!this.api) {\n      return { success: false, error: 'Cursor API not available' };\n    }\n    return this.api.listModels();\n  }\n\n  // ============================================\n  // Diamond Pattern Orchestration\n  // ============================================\n\n  /**\n   * Create a diamond pattern orchestration\n   */\n  async createDiamond(config: DiamondConfig): Promise<\n    Result<{\n      targetAgents: Agent[];\n      counterpartyAgent: Agent;\n    }>\n  > {\n    // Get my agent ID for context\n    const runningResult = await this.running();\n    const myId = runningResult.data?.[0]?.id ?? 'control-manager';\n\n    // Spawn target agents\n    const targetAgents: Agent[] = [];\n    for (const target of config.targetRepos) {\n      const result = await this.spawn({\n        ...target,\n        context: {\n          controlManagerId: myId,\n          controlCenter: config.controlCenter,\n        },\n      });\n      if (result.success && result.data) {\n        targetAgents.push(result.data);\n      }\n    }\n\n    // Spawn counterparty with knowledge of target agents\n    const counterpartyResult = await this.spawn({\n      ...config.counterparty,\n      context: {\n        controlManagerId: myId,\n        controlCenter: config.controlCenter,\n        relatedAgents: targetAgents.map((a) => a.id),\n        metadata: {\n          pattern: 'diamond',\n          targetRepos: config.targetRepos.map((t) => t.repository),\n        },\n      },\n    });\n\n    if (!counterpartyResult.success || !counterpartyResult.data) {\n      return {\n        success: false,\n        error: counterpartyResult.error ?? 'Failed to spawn counterparty',\n      };\n    }\n\n    // Notify target agents about counterparty\n    for (const agent of targetAgents) {\n      await this.followup(\n        agent.id,\n        `Counterparty agent spawned: ${counterpartyResult.data.id}\\n` +\n          `You may receive direct communication from this agent for coordination.`\n      );\n    }\n\n    return {\n      success: true,\n      data: {\n        targetAgents,\n        counterpartyAgent: counterpartyResult.data,\n      },\n    };\n  }\n\n  // ============================================\n  // Fleet Monitoring\n  // ============================================\n\n  /**\n   * Get fleet summary\n   */\n  async summary(): Promise<\n    Result<{\n      total: number;\n      running: number;\n      completed: number;\n      failed: number;\n      agents: Agent[];\n    }>\n  > {\n    const result = await this.list();\n    if (!result.success) return { success: false, error: result.error };\n\n    const agents = result.data ?? [];\n    return {\n      success: true,\n      data: {\n        total: agents.length,\n        running: agents.filter((a) => a.status === 'RUNNING').length,\n        completed: agents.filter((a) => a.status === 'COMPLETED' || a.status === 'FINISHED').length,\n        failed: agents.filter((a) => a.status === 'FAILED').length,\n        agents,\n      },\n    };\n  }\n\n  /**\n   * Wait for agent to complete\n   */\n  async waitFor(\n    agentId: string,\n    options?: {\n      timeout?: number;\n      pollInterval?: number;\n    }\n  ): Promise<Result<Agent>> {\n    const timeout = options?.timeout ?? 300000;\n    const pollInterval = options?.pollInterval ?? 10000;\n    const start = Date.now();\n\n    while (Date.now() - start < timeout) {\n      const result = await this.status(agentId);\n      if (!result.success) return result;\n\n      if (result.data?.status !== 'RUNNING') {\n        return result;\n      }\n\n      await new Promise((r) => setTimeout(r, pollInterval));\n    }\n\n    return { success: false, error: `Timeout waiting for agent ${agentId}` };\n  }\n\n  /**\n   * Monitor specific agents until all complete\n   */\n  async monitorAgents(\n    agentIds: string[],\n    options?: {\n      pollInterval?: number;\n      onProgress?: (status: Map<string, AgentStatus>) => void;\n    }\n  ): Promise<Map<string, Agent>> {\n    const pollInterval = options?.pollInterval ?? 15000;\n    const results = new Map<string, Agent>();\n    const pending = new Set(agentIds);\n    const nonTerminalStates = new Set<AgentStatus>(['RUNNING', 'PENDING']);\n\n    while (pending.size > 0) {\n      const statusMap = new Map<string, AgentStatus>();\n\n      for (const id of pending) {\n        const result = await this.status(id);\n        if (result.success && result.data) {\n          statusMap.set(id, result.data.status);\n\n          if (!nonTerminalStates.has(result.data.status)) {\n            results.set(id, result.data);\n            pending.delete(id);\n          }\n        }\n      }\n\n      options?.onProgress?.(statusMap);\n\n      if (pending.size > 0) {\n        await new Promise((r) => setTimeout(r, pollInterval));\n      }\n    }\n\n    return results;\n  }\n\n  // ============================================\n  // GitHub Coordination (Token-Aware, Using GitHubClient)\n  // ============================================\n\n  /**\n   * Run bidirectional coordination loop with intelligent token switching\n   */\n  async coordinate(config: CoordinationConfig): Promise<void> {\n    const outboundInterval = config.outboundInterval ?? 60000;\n    const inboundInterval = config.inboundInterval ?? 15000;\n    const agentIds = new Set(config.agentIds ?? []);\n    const processedCommentIds = new Set<number>();\n\n    // Parse repo into owner/name\n    const [owner, repo] = config.repo.split('/');\n    if (!owner || !repo) {\n      throw new Error(\"Invalid repo format. Expected 'owner/repo'\");\n    }\n\n    log.info('=== Fleet Coordinator Started ===');\n    log.info(`Coordination PR: #${config.coordinationPr}`);\n    log.info(`Monitoring ${agentIds.size} agents`);\n    log.info(`Using token for org: ${extractOrg(config.repo)}`);\n\n    // Run both loops concurrently\n    await Promise.all([\n      this.outboundLoop(config, agentIds, outboundInterval),\n      this.inboundLoop(config, owner, repo, agentIds, processedCommentIds, inboundInterval),\n    ]);\n  }\n\n  private async outboundLoop(\n    config: CoordinationConfig,\n    agentIds: Set<string>,\n    interval: number\n  ): Promise<void> {\n    while (true) {\n      try {\n        log.debug(`[OUTBOUND] Checking ${agentIds.size} agents...`);\n\n        for (const agentId of [...agentIds]) {\n          const result = await this.status(agentId);\n\n          if (!result.success || !result.data) {\n            log.warn(`${agentId.slice(0, 12)}: Unable to fetch status`);\n            continue;\n          }\n\n          const agent = result.data;\n\n          if (agent.status === 'RUNNING') {\n            const message = [\n              ' STATUS CHECK from Fleet Coordinator',\n              '',\n              'Report progress by commenting on the coordination PR:',\n              `https://github.com/${config.repo}/pull/${config.coordinationPr}`,\n            ].join('\\n');\n\n            await this.followup(agentId, message);\n          } else {\n            agentIds.delete(agentId);\n          }\n        }\n      } catch (err) {\n        log.error('[OUTBOUND ERROR]', err);\n      }\n\n      await new Promise((r) => setTimeout(r, interval));\n    }\n  }\n\n  private async inboundLoop(\n    config: CoordinationConfig,\n    owner: string,\n    repo: string,\n    agentIds: Set<string>,\n    processedIds: Set<number>,\n    interval: number\n  ): Promise<void> {\n    while (true) {\n      try {\n        // Use GitHubClient for safe API calls (no shell injection)\n        const commentsResult = await GitHubClient.listPRComments(\n          owner,\n          repo,\n          config.coordinationPr\n        );\n\n        if (!commentsResult.success || !commentsResult.data) {\n          log.warn('[INBOUND] Failed to fetch comments:', commentsResult.error);\n          await new Promise((r) => setTimeout(r, interval));\n          continue;\n        }\n\n        for (const comment of commentsResult.data) {\n          if (processedIds.has(comment.id)) continue;\n\n          if (comment.body.includes('@cursor')) {\n            log.info(`[INBOUND] New @cursor mention from ${comment.author}`);\n            await this.processCoordinationComment(owner, repo, config, agentIds, comment);\n          }\n\n          processedIds.add(comment.id);\n        }\n      } catch (err) {\n        log.error('[INBOUND ERROR]', err);\n      }\n\n      await new Promise((r) => setTimeout(r, interval));\n    }\n  }\n\n  private async processCoordinationComment(\n    owner: string,\n    repo: string,\n    config: CoordinationConfig,\n    agentIds: Set<string>,\n    comment: PRComment\n  ): Promise<void> {\n    const body = comment.body;\n\n    if (body.includes(' DONE:')) {\n      const match = body.match(/ DONE:\\s*(bc-[\\w-]+)\\s*(.*)/);\n      const agentId = match?.[1];\n      const summary = match?.[2];\n      if (agentId && summary !== undefined) {\n        log.info(`Agent ${agentId} completed: ${summary}`);\n        agentIds.delete(agentId);\n\n        // Use GitHubClient for posting (uses PR review token)\n        await GitHubClient.postPRComment(\n          owner,\n          repo,\n          config.coordinationPr,\n          ` Acknowledged completion from ${agentId.slice(0, 12)}. Summary: ${summary}`\n        );\n      }\n    } else if (body.includes(' BLOCKED:')) {\n      const match = body.match(/ BLOCKED:\\s*(bc-[\\w-]+)\\s*(.*)/);\n      const agentId = match?.[1];\n      const issue = match?.[2];\n      if (agentId && issue !== undefined) {\n        log.warn(`Agent ${agentId} blocked: ${issue}`);\n\n        await GitHubClient.postPRComment(\n          owner,\n          repo,\n          config.coordinationPr,\n          ` Agent ${agentId.slice(0, 12)} blocked: ${issue}\\n\\nManual intervention may be required.`\n        );\n      }\n    }\n  }\n}\n"]}